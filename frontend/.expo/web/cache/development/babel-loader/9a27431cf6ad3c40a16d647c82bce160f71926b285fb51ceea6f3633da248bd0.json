{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport { useState, useContext } from \"react\";\nimport * as constants from \"../constants\";\nimport UserContext from \"../contexts/UserContext\";\nimport client from \"../utils/axios\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nexport default function FollowButton(_ref) {\n  var followee_id = _ref.followee_id,\n    initUserIsFollowing = _ref.initUserIsFollowing;\n  var _useState = useState(initUserIsFollowing),\n    _useState2 = _slicedToArray(_useState, 2),\n    userIsFollowing = _useState2[0],\n    setUserIsFollowing = _useState2[1];\n  var _useContext = useContext(UserContext),\n    currentUser = _useContext.currentUser,\n    setCurrentUser = _useContext.setCurrentUser;\n  var handlePress = function handlePress() {\n    var action = 'follow';\n    var request;\n    if (userIsFollowing) {\n      action = 'unfollow';\n      request = client.delete;\n    } else {\n      request = client.post;\n    }\n    ;\n    request('/api/' + action + '/' + currentUser.user_id + '/' + followee_id, {\n      withCredentials: true\n    }).then(function (res) {\n      setUserIsFollowing(!userIsFollowing);\n      console.log(res.data);\n    }).catch(function (e) {\n      console.log(e.response.data);\n    });\n  };\n  return _jsx(_Fragment, {\n    children: _jsx(TouchableOpacity, {\n      activeOpacity: 1,\n      style: [userIsFollowing ? styles.unfollowButton : styles.followButton, styles.button],\n      onPress: handlePress,\n      children: _jsx(Text, {\n        style: [userIsFollowing ? styles.unfollowButtonText : styles.followButtonText, styles.buttonText],\n        children: userIsFollowing ? 'Unfollow' : 'Follow'\n      })\n    })\n  });\n}\nvar styles = StyleSheet.create({\n  button: {\n    borderRadius: 5,\n    borderWidth: 3,\n    padding: 7,\n    width: 90\n  },\n  followButton: {\n    backgroundColor: constants.SECONDARYCOLOR,\n    borderColor: constants.PRIMARYCOLOR\n  },\n  unfollowButton: {\n    backgroundColor: constants.PRIMARYCOLOR,\n    borderColor: constants.PRIMARYCOLOR,\n    color: constants.TERTIARYCOLOR\n  },\n  buttonText: {\n    fontSize: constants.H3FONTSIZE,\n    fontFamily: constants.FONTFAMILYBOLD,\n    marginLeft: 'auto',\n    marginRight: 'auto'\n  },\n  followButtonText: {\n    color: constants.PRIMARYCOLOR\n  },\n  unfollowButtonText: {\n    color: constants.TERTIARYCOLOR\n  }\n});","map":{"version":3,"names":["useState","useContext","constants","UserContext","client","jsx","_jsx","Fragment","_Fragment","FollowButton","_ref","followee_id","initUserIsFollowing","_useState","_useState2","_slicedToArray","userIsFollowing","setUserIsFollowing","_useContext","currentUser","setCurrentUser","handlePress","action","request","delete","post","user_id","withCredentials","then","res","console","log","data","catch","e","response","children","TouchableOpacity","activeOpacity","style","styles","unfollowButton","followButton","button","onPress","Text","unfollowButtonText","followButtonText","buttonText","StyleSheet","create","borderRadius","borderWidth","padding","width","backgroundColor","SECONDARYCOLOR","borderColor","PRIMARYCOLOR","color","TERTIARYCOLOR","fontSize","H3FONTSIZE","fontFamily","FONTFAMILYBOLD","marginLeft","marginRight"],"sources":["C:/Users/Toby Usher/Documents/dev/quivo-app/frontend/components/FollowButton.tsx"],"sourcesContent":["import { TouchableOpacity, Text, StyleSheet } from \"react-native\"\r\nimport { useState, useContext } from \"react\";\r\nimport * as constants from \"../constants\"\r\nimport UserContext from '../contexts/UserContext';\r\nimport client from \"../utils/axios\";\r\n\r\ninterface IFollowButton {\r\n    followee_id: number,\r\n    initUserIsFollowing: boolean\r\n}\r\n\r\nexport default function FollowButton({ followee_id, initUserIsFollowing }: IFollowButton) {\r\n    \r\n    const [userIsFollowing, setUserIsFollowing] = useState(initUserIsFollowing);\r\n    \r\n    //Not sure if you can import hook setters like this but it didn't seem to work\r\n    const { currentUser, setCurrentUser } = useContext(UserContext);\r\n    \r\n    const handlePress = () => {\r\n        \r\n        let action = 'follow';\r\n        let request; // Error if I set client.post here but not sure why\r\n        \r\n        if (userIsFollowing) {\r\n            action = 'unfollow';\r\n            request = client.delete;\r\n        } else {\r\n            request = client.post\r\n        };\r\n        \r\n        request(\r\n            '/api/' + action + '/' + currentUser.user_id + '/' + followee_id,\r\n            { withCredentials: true }\r\n        ).then(function(res) {\r\n            setUserIsFollowing(!userIsFollowing);\r\n            console.log(res.data)\r\n        }).catch(function(e) {\r\n            console.log(e.response.data)\r\n        });\r\n    };\r\n    \r\n    return (\r\n        <>\r\n            <TouchableOpacity\r\n                activeOpacity={1}\r\n                style={[\r\n                    userIsFollowing ? styles.unfollowButton : styles.followButton,\r\n                    styles.button\r\n                ]}\r\n                onPress={handlePress}\r\n                >\r\n                <Text style={[\r\n                    userIsFollowing ? styles.unfollowButtonText : styles.followButtonText,\r\n                    styles.buttonText\r\n                ]}\r\n                >\r\n                    {userIsFollowing ? 'Unfollow' : 'Follow'}\r\n                </Text>\r\n            </TouchableOpacity>\r\n        </>\r\n    );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n    button: {\r\n        borderRadius: 5,\r\n        borderWidth: 3,\r\n        padding: 7,\r\n        width: 90\r\n    },\r\n    followButton: {\r\n        backgroundColor: constants.SECONDARYCOLOR,\r\n        borderColor: constants.PRIMARYCOLOR\r\n    },\r\n    unfollowButton: {\r\n        backgroundColor: constants.PRIMARYCOLOR,\r\n        borderColor: constants.PRIMARYCOLOR,\r\n        color: constants.TERTIARYCOLOR\r\n    },\r\n    buttonText: {\r\n        fontSize: constants.H3FONTSIZE,\r\n        fontFamily: constants.FONTFAMILYBOLD,\r\n        marginLeft: 'auto',\r\n        marginRight: 'auto'\r\n    },\r\n    followButtonText: {\r\n        color: constants.PRIMARYCOLOR\r\n    },\r\n    unfollowButtonText: {\r\n        color: constants.TERTIARYCOLOR\r\n    }\r\n});"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}